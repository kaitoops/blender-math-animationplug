# MCP动画控制模块使用指南

[English Version](mcp_user_guide_en.md) | [中文版本](mcp_user_guide.md)

## 简介

这是一个专为Blender设计的数学动画插件，旨在简化数学概念的可视化和动画制作过程。该插件提供了丰富的工具和功能，帮助用户创建高质量的数学教育内容和科学可视化作品。

MCP（Motion Capture）动画控制模块是Blender数学动画插件的一个重要组成部分，它提供了强大的动作捕捉数据处理和应用功能。本模块支持动画数据的加载、骨骼映射、动画应用以及性能优化等功能。

## 功能特点

- 支持多种格式的动作捕捉数据导入
- 灵活的骨骼映射系统，支持模板保存和复用
- 智能的动画数据处理和优化
- 可调节的性能优化级别
- 完整的错误处理和日志记录

## 使用方法

### 1. 界面布局

MCP控制面板位于3D视图的侧边栏（按N键打开），包含以下主要区域：

- 文件设置：选择MCP数据文件
- 动画控制：设置动画的起始帧和结束帧
- 动画设置：调整平滑系数和自动缩放选项
- 骨骼映射：管理骨骼映射模板
- 性能设置：调整性能优化级别
- 操作按钮：加载、应用和清理动画

### 2. 基本工作流程

1. **准备工作**
   - 导入或创建目标骨骼装备
   - 准备MCP动作捕捉数据文件

2. **加载动画**
   - 在文件设置中选择MCP数据文件
   - 点击"加载动画"按钮

3. **设置映射**
   - 选择已有的映射模板，或
   - 创建新的骨骼映射并保存为模板

4. **应用动画**
   - 选择目标骨骼装备
   - 设置动画参数（起始帧、结束帧等）
   - 点击"应用动画"按钮

5. **优化和调整**
   - 调整平滑系数以获得理想的动画效果
   - 根据需要启用自动缩放
   - 调整性能级别以平衡质量和性能

### 3. 性能优化

性能级别设置提供三个选项：

- **低**：优先考虑性能，适用于预览或实时反馈
- **中**：平衡性能和质量，适用于大多数情况
- **高**：优先考虑质量，适用于最终渲染

### 4. 骨骼映射模板

骨骼映射模板可以保存常用的映射配置，方便在不同项目中复用：

1. **创建模板**
   - 完成骨骼映射设置
   - 点击"保存映射模板"按钮
   - 输入模板名称并保存

2. **使用模板**
   - 从下拉列表中选择已保存的模板
   - 模板会自动应用到当前骨骼装备

## 最佳实践

1. **数据准备**
   - 确保MCP数据格式正确
   - 预先清理和标准化动作数据

2. **性能优化**
   - 在制作过程中使用低或中等性能级别
   - 最终渲染时使用高性能级别
   - 适当调整平滑系数，避免过度平滑

3. **骨骼映射**
   - 为常用的骨骼结构创建映射模板
   - 定期检查和更新映射关系
   - 使用有意义的模板名称

4. **工作流程优化**
   - 先在小段动画上测试设置
   - 保持场景文件整洁
   - 定期保存工作成果

## 故障排除

1. **加载失败**
   - 检查文件格式是否支持
   - 确认文件路径正确
   - 查看错误日志获取详细信息

2. **应用失败**
   - 确保选择了正确的骨骼装备
   - 检查骨骼映射是否完整
   - 验证动画帧范围设置

3. **性能问题**
   - 尝试降低性能级别
   - 减少场景中的其他物体
   - 关闭不必要的视窗特效

## 技术支持

如果遇到问题或需要帮助，请：

1. 查看错误日志获取详细信息
2. 检查是否使用了最新版本
3. 通过项目Issue系统报告问题

## 版本历史

### v1.0.0
- 初始版本发布
- 支持基本的MCP数据处理
- 实现骨骼映射系统
- 添加性能优化功能